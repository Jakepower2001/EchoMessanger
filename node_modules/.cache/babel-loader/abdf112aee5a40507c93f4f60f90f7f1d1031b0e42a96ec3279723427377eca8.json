{"ast":null,"code":"import _objectSpread from\"C:/messagingapp/firebase-react-messaging-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";// <-- Import the updated User type\nimport{db}from\"../firebase/config\";import{collection,getDocs}from\"firebase/firestore\";import{auth}from\"../firebase/config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserList=_ref=>{let{onSelect}=_ref;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchUsers=async()=>{try{const snapshot=await getDocs(collection(db,\"users\"));const usersList=[];snapshot.forEach(doc=>{var _auth$currentUser;if(doc.id!==((_auth$currentUser=auth.currentUser)===null||_auth$currentUser===void 0?void 0:_auth$currentUser.uid)){usersList.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));}});setUsers(usersList);}catch(error){console.error(\"Error fetching users: \",error);}finally{setLoading(false);}};fetchUsers();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading users...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User List\"}),/*#__PURE__*/_jsx(\"ul\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"li\",{style:{display:\"flex\",alignItems:\"center\",marginBottom:\"0.5em\"},children:[/*#__PURE__*/_jsx(\"img\",{src:user.avatar||\"https://i.pravatar.cc/40\",alt:\"avatar\",style:{width:32,height:32,borderRadius:\"50%\",marginRight:8}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onSelect&&onSelect(user),children:user.username||user.name||user.email})]},user.id))})]});};export default UserList;","map":{"version":3,"names":["React","useEffect","useState","db","collection","getDocs","auth","jsx","_jsx","jsxs","_jsxs","UserList","_ref","onSelect","users","setUsers","loading","setLoading","fetchUsers","snapshot","usersList","forEach","doc","_auth$currentUser","id","currentUser","uid","push","_objectSpread","data","error","console","children","map","user","style","display","alignItems","marginBottom","src","avatar","alt","width","height","borderRadius","marginRight","onClick","username","name","email"],"sources":["C:/messagingapp/firebase-react-messaging-app/src/components/UserList.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { User } from \"../types/User\"; // <-- Import the updated User type\nimport { db } from \"../firebase/config\";\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { auth } from \"../firebase/config\";\n\ninterface Props {\n  onSelect?: (user: User) => void;\n}\n\nconst UserList: React.FC<Props> = ({ onSelect }) => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const snapshot = await getDocs(collection(db, \"users\"));\n        const usersList: User[] = [];\n        snapshot.forEach(doc => {\n          if (doc.id !== auth.currentUser?.uid) {\n            usersList.push({ ...(doc.data() as User), id: doc.id });\n          }\n        });\n        setUsers(usersList);\n      } catch (error) {\n        console.error(\"Error fetching users: \", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  if (loading) {\n    return <div>Loading users...</div>;\n  }\n\n  return (\n    <div>\n      <h2>User List</h2>\n      <ul>\n        {users.map(user => (\n          <li key={user.id} style={{ display: \"flex\", alignItems: \"center\", marginBottom: \"0.5em\" }}>\n            <img\n              src={user.avatar || \"https://i.pravatar.cc/40\"}\n              alt=\"avatar\"\n              style={{ width: 32, height: 32, borderRadius: \"50%\", marginRight: 8 }}\n            />\n            <button onClick={() => onSelect && onSelect(user)}>\n              {user.username || user.name || user.email}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default UserList;"],"mappings":"iIAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACZ;AACtC,OAASC,EAAE,KAAQ,oBAAoB,CACvC,OAASC,UAAU,CAAEC,OAAO,KAAQ,oBAAoB,CACxD,OAASC,IAAI,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAM1C,KAAM,CAAAC,QAAyB,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC7C,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAS,EAAE,CAAC,CAC9C,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAd,OAAO,CAACD,UAAU,CAACD,EAAE,CAAE,OAAO,CAAC,CAAC,CACvD,KAAM,CAAAiB,SAAiB,CAAG,EAAE,CAC5BD,QAAQ,CAACE,OAAO,CAACC,GAAG,EAAI,KAAAC,iBAAA,CACtB,GAAID,GAAG,CAACE,EAAE,KAAAD,iBAAA,CAAKjB,IAAI,CAACmB,WAAW,UAAAF,iBAAA,iBAAhBA,iBAAA,CAAkBG,GAAG,EAAE,CACpCN,SAAS,CAACO,IAAI,CAAAC,aAAA,CAAAA,aAAA,IAAON,GAAG,CAACO,IAAI,CAAC,CAAC,MAAWL,EAAE,CAAEF,GAAG,CAACE,EAAE,EAAE,CAAC,CACzD,CACF,CAAC,CAAC,CACFT,QAAQ,CAACK,SAAS,CAAC,CACrB,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CAAC,OAAS,CACRb,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CACDC,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIF,OAAO,CAAE,CACX,mBAAOR,IAAA,QAAAwB,QAAA,CAAK,kBAAgB,CAAK,CAAC,CACpC,CAEA,mBACEtB,KAAA,QAAAsB,QAAA,eACExB,IAAA,OAAAwB,QAAA,CAAI,WAAS,CAAI,CAAC,cAClBxB,IAAA,OAAAwB,QAAA,CACGlB,KAAK,CAACmB,GAAG,CAACC,IAAI,eACbxB,KAAA,OAAkByB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,YAAY,CAAE,OAAQ,CAAE,CAAAN,QAAA,eACxFxB,IAAA,QACE+B,GAAG,CAAEL,IAAI,CAACM,MAAM,EAAI,0BAA2B,CAC/CC,GAAG,CAAC,QAAQ,CACZN,KAAK,CAAE,CAAEO,KAAK,CAAE,EAAE,CAAEC,MAAM,CAAE,EAAE,CAAEC,YAAY,CAAE,KAAK,CAAEC,WAAW,CAAE,CAAE,CAAE,CACvE,CAAC,cACFrC,IAAA,WAAQsC,OAAO,CAAEA,CAAA,GAAMjC,QAAQ,EAAIA,QAAQ,CAACqB,IAAI,CAAE,CAAAF,QAAA,CAC/CE,IAAI,CAACa,QAAQ,EAAIb,IAAI,CAACc,IAAI,EAAId,IAAI,CAACe,KAAK,CACnC,CAAC,GARFf,IAAI,CAACV,EASV,CACL,CAAC,CACA,CAAC,EACF,CAAC,CAEV,CAAC,CAED,cAAe,CAAAb,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}