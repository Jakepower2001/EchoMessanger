{"ast":null,"code":"import _objectSpread from\"C:/messagingapp/firebase-react-messaging-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import UserList from\"./UserList\";import Chat from\"./Chat\";import{auth,db}from\"../firebase/config\";import{collection,query,where,getDocs,addDoc,doc,setDoc,deleteDoc,getDoc}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoggedInHome=()=>{const user=auth.currentUser;const[searchEmail,setSearchEmail]=useState(\"\");const[searchResult,setSearchResult]=useState(null);const[requests,setRequests]=useState([]);const[friends,setFriends]=useState([]);const[showFriends,setShowFriends]=useState(true);const[selectedFriend,setSelectedFriend]=useState(null);const[userInfo,setUserInfo]=useState(null);const handleLogout=async()=>{await auth.signOut();window.location.href=\"/login\";};// Helper to get user info by UID\nconst getUserInfo=async uid=>{const userDoc=await getDocs(query(collection(db,\"users\"),where(\"uid\",\"==\",uid)));if(!userDoc.empty){return userDoc.docs[0].data();}return{email:uid};};// Fetch current user info\nuseEffect(()=>{const fetchUserInfo=async()=>{var _auth$currentUser;if(!((_auth$currentUser=auth.currentUser)!==null&&_auth$currentUser!==void 0&&_auth$currentUser.uid))return;const userDoc=await getDoc(doc(db,\"users\",auth.currentUser.uid));if(userDoc.exists()){setUserInfo(userDoc.data());}};fetchUserInfo();},[]);// Search for users by email or name\nconst handleSearch=async()=>{let q=query(collection(db,\"users\"),where(\"email\",\"==\",searchEmail));let snapshot=await getDocs(q);// If not found by email, try by name\nif(snapshot.empty){q=query(collection(db,\"users\"),where(\"name\",\"==\",searchEmail));snapshot=await getDocs(q);}if(!snapshot.empty){setSearchResult(_objectSpread(_objectSpread({},snapshot.docs[0].data()),{},{uid:snapshot.docs[0].id}));}else{setSearchResult(null);alert(\"User not found\");}};// Send friend request\nconst sendFriendRequest=async toUid=>{var _auth$currentUser2;await addDoc(collection(db,\"friendRequests\"),{from:(_auth$currentUser2=auth.currentUser)===null||_auth$currentUser2===void 0?void 0:_auth$currentUser2.uid,to:toUid,status:\"pending\"});alert(\"Friend request sent!\");setSearchResult(null);setSearchEmail(\"\");};// Fetch incoming friend requests\nuseEffect(()=>{const fetchRequests=async()=>{if(!auth.currentUser||!auth.currentUser.uid)return;// <-- Guard inside async\nconst q=query(collection(db,\"friendRequests\"),where(\"to\",\"==\",auth.currentUser.uid),where(\"status\",\"==\",\"pending\"));const snapshot=await getDocs(q);const requestsWithInfo=await Promise.all(snapshot.docs.map(async doc=>{const data=doc.data();const senderInfo=await getUserInfo(data.from);return _objectSpread(_objectSpread({id:doc.id},data),{},{senderInfo});}));setRequests(requestsWithInfo);};fetchRequests();},[]);// Accept or decline friend request\nconst respondToRequest=async(requestId,accept,fromUid)=>{const requestRef=doc(db,\"friendRequests\",requestId);await setDoc(requestRef,{status:accept?\"accepted\":\"declined\"},{merge:true});if(accept){var _auth$currentUser3;await addDoc(collection(db,\"friends\"),{users:[(_auth$currentUser3=auth.currentUser)===null||_auth$currentUser3===void 0?void 0:_auth$currentUser3.uid,fromUid]});}setRequests(requests.filter(r=>r.id!==requestId));};// Fetch friends\nuseEffect(()=>{const fetchFriends=async()=>{if(!auth.currentUser||!auth.currentUser.uid)return;const q=query(collection(db,\"friends\"),where(\"users\",\"array-contains\",auth.currentUser.uid));const snapshot=await getDocs(q);const friendUids=snapshot.docs.map(doc=>doc.data().users.filter(uid=>{var _auth$currentUser4;return uid!==((_auth$currentUser4=auth.currentUser)===null||_auth$currentUser4===void 0?void 0:_auth$currentUser4.uid);})[0]).filter(Boolean);// Fetch user info for each friend UID\nconst friendsWithInfo=await Promise.all(friendUids.map(async uid=>{const userSnap=await getDocs(query(collection(db,\"users\"),where(\"id\",\"==\",uid)));if(!userSnap.empty){const data=userSnap.docs[0].data();return{uid,name:data.name||data.email||uid};}return{uid,name:uid};}));setFriends(friendsWithInfo);};fetchFriends();},[]);// Unfriend function\nconst unfriend=async friendUid=>{var _auth$currentUser5;const q=query(collection(db,\"friends\"),where(\"users\",\"array-contains\",(_auth$currentUser5=auth.currentUser)===null||_auth$currentUser5===void 0?void 0:_auth$currentUser5.uid));const snapshot=await getDocs(q);const docToDelete=snapshot.docs.find(doc=>{var _auth$currentUser6;const users=doc.data().users;return users.includes(friendUid)&&users.includes((_auth$currentUser6=auth.currentUser)===null||_auth$currentUser6===void 0?void 0:_auth$currentUser6.uid);});if(docToDelete){await deleteDoc(docToDelete.ref);setFriends(friends.filter(friend=>friend.uid!==friendUid));alert(\"Unfriended!\");if(selectedFriend===friendUid)setSelectedFriend(null);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"img\",{src:(userInfo===null||userInfo===void 0?void 0:userInfo.avatar)||\"https://i.pravatar.cc/60\",alt:\"Profile\",className:\"avatar\"}),/*#__PURE__*/_jsx(\"h3\",{children:(user===null||user===void 0?void 0:user.displayName)||(user===null||user===void 0?void 0:user.email)})]}),/*#__PURE__*/_jsx(\"input\",{className:\"search\",placeholder:\"Search users by email\",value:searchEmail,onChange:e=>setSearchEmail(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"Search\"}),searchResult&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:searchResult.email}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>sendFriendRequest(searchResult.uid),children:\"Add Friend\"})]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Friend Requests\"}),/*#__PURE__*/_jsx(\"ul\",{children:requests.map(req=>/*#__PURE__*/_jsxs(\"li\",{children:[req.senderInfo.name||req.senderInfo.email,/*#__PURE__*/_jsx(\"button\",{onClick:()=>respondToRequest(req.id,true,req.from),children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>respondToRequest(req.id,false,req.from),children:\"Decline\"})]},req.id))}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Friends\",/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:10},onClick:()=>setShowFriends(!showFriends),children:showFriends?\"Hide\":\"Show\"})]}),showFriends&&/*#__PURE__*/_jsx(\"ul\",{children:friends.map(friend=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"button\",{style:{background:selectedFriend===friend.uid?\"#4078c0\":\"#222\",color:\"#fff\",border:\"none\",borderRadius:\"4px\",padding:\"0.3em 1em\",marginRight:\"0.5em\"},onClick:()=>setSelectedFriend(friend.uid),children:friend.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>unfriend(friend.uid),children:\"Unfriend\"})]},friend.uid))}),/*#__PURE__*/_jsx(UserList,{})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"chat-section\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"chat-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://i.pravatar.cc/60?u=chat\",alt:\"Chat User\",className:\"avatar\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{children:selectedFriend?\"Chat with \".concat(selectedFriend):\"Select a friend to chat\"})})]}),/*#__PURE__*/_jsx(Chat,{selectedFriend:selectedFriend})]}),/*#__PURE__*/_jsxs(\"aside\",{className:\"info-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://i.pravatar.cc/60?u=info\",alt:\"Info User\",className:\"avatar\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Maria Nelson\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Grateful for every sunrise and sunset \\uD83C\\uDF05\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-list\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Chat settings\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Privacy & help\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Shared photos\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Shared files\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"block-btn\",children:\"Block User\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:handleLogout,children:\"Logout\"})]})]});};export default LoggedInHome;","map":{"version":3,"names":["React","useState","useEffect","UserList","Chat","auth","db","collection","query","where","getDocs","addDoc","doc","setDoc","deleteDoc","getDoc","jsx","_jsx","jsxs","_jsxs","LoggedInHome","user","currentUser","searchEmail","setSearchEmail","searchResult","setSearchResult","requests","setRequests","friends","setFriends","showFriends","setShowFriends","selectedFriend","setSelectedFriend","userInfo","setUserInfo","handleLogout","signOut","window","location","href","getUserInfo","uid","userDoc","empty","docs","data","email","fetchUserInfo","_auth$currentUser","exists","handleSearch","q","snapshot","_objectSpread","id","alert","sendFriendRequest","toUid","_auth$currentUser2","from","to","status","fetchRequests","requestsWithInfo","Promise","all","map","senderInfo","respondToRequest","requestId","accept","fromUid","requestRef","merge","_auth$currentUser3","users","filter","r","fetchFriends","friendUids","_auth$currentUser4","Boolean","friendsWithInfo","userSnap","name","unfriend","friendUid","_auth$currentUser5","docToDelete","find","_auth$currentUser6","includes","ref","friend","className","children","src","avatar","alt","displayName","placeholder","value","onChange","e","target","onClick","req","style","marginLeft","background","color","border","borderRadius","padding","marginRight","concat"],"sources":["C:/messagingapp/firebase-react-messaging-app/src/components/LoggedInHome.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport UserList from \"./UserList\";\r\nimport Chat from \"./Chat\";\r\nimport { auth, db } from \"../firebase/config\";\r\nimport { collection, query, where, getDocs, addDoc, doc, setDoc, deleteDoc, getDoc } from \"firebase/firestore\";\r\n\r\nconst LoggedInHome: React.FC = () => {\r\n  const user = auth.currentUser;\r\n  const [searchEmail, setSearchEmail] = useState(\"\");\r\n  const [searchResult, setSearchResult] = useState<any>(null);\r\n  const [requests, setRequests] = useState<any[]>([]);\r\n  const [friends, setFriends] = useState<any[]>([]);\r\n  const [showFriends, setShowFriends] = useState(true);\r\n  const [selectedFriend, setSelectedFriend] = useState<string | null>(null);\r\n  const [userInfo, setUserInfo] = useState<any>(null);\r\n\r\n  const handleLogout = async () => {\r\n    await auth.signOut();\r\n    window.location.href = \"/login\";\r\n  };\r\n\r\n  // Helper to get user info by UID\r\n  const getUserInfo = async (uid: string) => {\r\n    const userDoc = await getDocs(query(collection(db, \"users\"), where(\"uid\", \"==\", uid)));\r\n    if (!userDoc.empty) {\r\n      return userDoc.docs[0].data();\r\n    }\r\n    return { email: uid };\r\n  };\r\n\r\n  // Fetch current user info\r\n  useEffect(() => {\r\n    const fetchUserInfo = async () => {\r\n      if (!auth.currentUser?.uid) return;\r\n      const userDoc = await getDoc(doc(db, \"users\", auth.currentUser.uid));\r\n      if (userDoc.exists()) {\r\n        setUserInfo(userDoc.data());\r\n      }\r\n    };\r\n    fetchUserInfo();\r\n  }, []);\r\n\r\n  // Search for users by email or name\r\n  const handleSearch = async () => {\r\n    let q = query(collection(db, \"users\"), where(\"email\", \"==\", searchEmail));\r\n    let snapshot = await getDocs(q);\r\n\r\n    // If not found by email, try by name\r\n    if (snapshot.empty) {\r\n      q = query(collection(db, \"users\"), where(\"name\", \"==\", searchEmail));\r\n      snapshot = await getDocs(q);\r\n    }\r\n\r\n    if (!snapshot.empty) {\r\n      setSearchResult({ ...snapshot.docs[0].data(), uid: snapshot.docs[0].id });\r\n    } else {\r\n      setSearchResult(null);\r\n      alert(\"User not found\");\r\n    }\r\n  };\r\n\r\n  // Send friend request\r\n  const sendFriendRequest = async (toUid: string) => {\r\n    await addDoc(collection(db, \"friendRequests\"), {\r\n      from: auth.currentUser?.uid,\r\n      to: toUid,\r\n      status: \"pending\"\r\n    });\r\n    alert(\"Friend request sent!\");\r\n    setSearchResult(null);\r\n    setSearchEmail(\"\");\r\n  };\r\n\r\n  // Fetch incoming friend requests\r\n  useEffect(() => {\r\n    const fetchRequests = async () => {\r\n      if (!auth.currentUser || !auth.currentUser.uid) return; // <-- Guard inside async\r\n      const q = query(\r\n        collection(db, \"friendRequests\"),\r\n        where(\"to\", \"==\", auth.currentUser.uid),\r\n        where(\"status\", \"==\", \"pending\")\r\n      );\r\n      const snapshot = await getDocs(q);\r\n      const requestsWithInfo = await Promise.all(snapshot.docs.map(async doc => {\r\n        const data = doc.data();\r\n        const senderInfo = await getUserInfo(data.from);\r\n        return { id: doc.id, ...data, senderInfo };\r\n      }));\r\n      setRequests(requestsWithInfo);\r\n    };\r\n    fetchRequests();\r\n  }, []);\r\n\r\n  // Accept or decline friend request\r\n  const respondToRequest = async (requestId: string, accept: boolean, fromUid: string) => {\r\n    const requestRef = doc(db, \"friendRequests\", requestId);\r\n    await setDoc(requestRef, { status: accept ? \"accepted\" : \"declined\" }, { merge: true });\r\n    if (accept) {\r\n      await addDoc(collection(db, \"friends\"), {\r\n        users: [auth.currentUser?.uid, fromUid]\r\n      });\r\n    }\r\n    setRequests(requests.filter(r => r.id !== requestId));\r\n  };\r\n\r\n  // Fetch friends\r\n  useEffect(() => {\r\n    const fetchFriends = async () => {\r\n      if (!auth.currentUser || !auth.currentUser.uid) return;\r\n      const q = query(\r\n        collection(db, \"friends\"),\r\n        where(\"users\", \"array-contains\", auth.currentUser.uid)\r\n      );\r\n      const snapshot = await getDocs(q);\r\n      const friendUids = snapshot.docs\r\n        .map(doc =>\r\n          doc.data().users.filter((uid: string) => uid !== auth.currentUser?.uid)[0]\r\n        )\r\n        .filter(Boolean);\r\n\r\n      // Fetch user info for each friend UID\r\n      const friendsWithInfo = await Promise.all(\r\n        friendUids.map(async (uid: string) => {\r\n          const userSnap = await getDocs(query(collection(db, \"users\"), where(\"id\", \"==\", uid)));\r\n          if (!userSnap.empty) {\r\n            const data = userSnap.docs[0].data();\r\n            return { uid, name: data.name || data.email || uid };\r\n          }\r\n          return { uid, name: uid };\r\n        })\r\n      );\r\n      setFriends(friendsWithInfo);\r\n    };\r\n    fetchFriends();\r\n  }, []);\r\n\r\n  // Unfriend function\r\n  const unfriend = async (friendUid: string) => {\r\n    const q = query(\r\n      collection(db, \"friends\"),\r\n      where(\"users\", \"array-contains\", auth.currentUser?.uid)\r\n    );\r\n    const snapshot = await getDocs(q);\r\n    const docToDelete = snapshot.docs.find(doc => {\r\n      const users = doc.data().users;\r\n      return users.includes(friendUid) && users.includes(auth.currentUser?.uid);\r\n    });\r\n    if (docToDelete) {\r\n      await deleteDoc(docToDelete.ref);\r\n      setFriends(friends.filter(friend => friend.uid !== friendUid));\r\n      alert(\"Unfriended!\");\r\n      if (selectedFriend === friendUid) setSelectedFriend(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-container\">\r\n      {/* Friends List */}\r\n      <aside className=\"sidebar\">\r\n        <div className=\"profile\">\r\n          <img src={userInfo?.avatar || \"https://i.pravatar.cc/60\"} alt=\"Profile\" className=\"avatar\" />\r\n          <h3>{user?.displayName || user?.email}</h3>\r\n        </div>\r\n        <input\r\n          className=\"search\"\r\n          placeholder=\"Search users by email\"\r\n          value={searchEmail}\r\n          onChange={e => setSearchEmail(e.target.value)}\r\n        />\r\n        <button onClick={handleSearch}>Search</button>\r\n        {searchResult && (\r\n          <div>\r\n            <span>{searchResult.email}</span>\r\n            <button onClick={() => sendFriendRequest(searchResult.uid)}>Add Friend</button>\r\n          </div>\r\n        )}\r\n        <h4>Friend Requests</h4>\r\n        <ul>\r\n          {requests.map(req => (\r\n            <li key={req.id}>\r\n              {req.senderInfo.name || req.senderInfo.email}\r\n              <button onClick={() => respondToRequest(req.id, true, req.from)}>Accept</button>\r\n              <button onClick={() => respondToRequest(req.id, false, req.from)}>Decline</button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <h4>\r\n          Friends\r\n          <button style={{ marginLeft: 10 }} onClick={() => setShowFriends(!showFriends)}>\r\n            {showFriends ? \"Hide\" : \"Show\"}\r\n          </button>\r\n        </h4>\r\n        {showFriends && (\r\n          <ul>\r\n            {friends.map(friend => (\r\n              <li key={friend.uid}>\r\n                <button\r\n                  style={{\r\n                    background: selectedFriend === friend.uid ? \"#4078c0\" : \"#222\",\r\n                    color: \"#fff\",\r\n                    border: \"none\",\r\n                    borderRadius: \"4px\",\r\n                    padding: \"0.3em 1em\",\r\n                    marginRight: \"0.5em\",\r\n                  }}\r\n                  onClick={() => setSelectedFriend(friend.uid)}\r\n                >\r\n                  {friend.name}\r\n                </button>\r\n                <button onClick={() => unfriend(friend.uid)}>Unfriend</button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n        <UserList />\r\n      </aside>\r\n\r\n      {/* Chat Section */}\r\n      <section className=\"chat-section\">\r\n        <header className=\"chat-header\">\r\n          <img src=\"https://i.pravatar.cc/60?u=chat\" alt=\"Chat User\" className=\"avatar\" />\r\n          <div>\r\n            <h3>\r\n              {selectedFriend\r\n                ? `Chat with ${selectedFriend}`\r\n                : \"Select a friend to chat\"}\r\n            </h3>\r\n          </div>\r\n        </header>\r\n        <Chat selectedFriend={selectedFriend} />\r\n      </section>\r\n\r\n      {/* Settings/Info Section */}\r\n      <aside className=\"info-section\">\r\n        <div className=\"info-header\">\r\n          <img src=\"https://i.pravatar.cc/60?u=info\" alt=\"Info User\" className=\"avatar\" />\r\n          <h3>Maria Nelson</h3>\r\n          <span>Grateful for every sunrise and sunset 🌅</span>\r\n        </div>\r\n        <div className=\"settings-list\">\r\n          <div>Chat settings</div>\r\n          <div>Privacy & help</div>\r\n          <div>Shared photos</div>\r\n          <div>Shared files</div>\r\n        </div>\r\n        <button className=\"block-btn\">Block User</button>\r\n        <button className=\"logout-btn\" onClick={handleLogout}>Logout</button>\r\n      </aside>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoggedInHome;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}